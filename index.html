<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f6f9;
      color: #333;
    }

    header, footer {
      background-color: #4a90e2;
      color: white;
      text-align: center;
      padding: 1rem;
    }

    main {
      padding: 20px;
      max-width: 500px;
      margin: auto;
      background: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border-radius: 10px;
      margin-top: 20px;
      margin-bottom: 20px;
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #4a90e2;
    }

    section {
      margin-bottom: 24px;
    }

    section h3 {
      color: #666;
      margin-bottom: 8px;
      border-bottom: 1px solid #ddd;
      padding-bottom: 4px;
    }

    label {
      display: block;
      margin-top: 12px;
      margin-bottom: 4px;
    }

    input {
      padding: 8px;
      width: 100%;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    button {
      width: 100%;
      padding: 12px;
      background-color: #4a90e2;
      color: white;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      margin-top: 20px;
      cursor: pointer;
    }

    button:hover {
      background-color: #357ab8;
    }

    .flex-pair {
      display: flex;
      gap: 12px;
    }
    
    .flex-pair > div {
      flex: 1;
    }

  </style>
</head>
<body>

  <header>
    <h1>üìä ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</h1>
  </header>

  <main>
    <h2>‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</h2>

    <section>
      <h3>üßë‚Äçüíº ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</h3>
      <label>‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</label>
      <input id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô" />
    </section>

    <section>
      <h3>üïí ‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</h3>
      
      <div class="flex-pair">
        <div>
          <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</label>
          <input id="workingDay" type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 22" />
        </div>
        <div>
          <label>‡πÇ‡∏≠‡∏ó‡∏µ (‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)</label>
          <input id="credit" type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 5" />
        </div>
      </div>
    
      <label>‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏≤‡∏¢ (‡∏ô‡∏≤‡∏ó‡∏µ)</label>
      <input id="qr" type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 10" />
    </section>


    <section>
      <h3>üí∞ ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢</h3>
      <label>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏° (‡∏ö‡∏≤‡∏ó)</label>
      <input id="totalSales" type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 123456" />
    </section>

    <section>
      <h3>üìÜ ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</h3>
      
      <!-- ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà 1: ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ & ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏±‡∏Å‡∏Ç‡∏±‡∏ï‡∏§‡∏Å‡∏©‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ -->
      <div style="display: flex; gap: 12px;">
        <div style="flex: 1;">
          <label>‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ</label>
          <input id="leaveHave" type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 4" oninput="updateTotalLeave()" />
        </div>
        <div style="flex: 1;">
          <label>‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏±‡∏Å‡∏Ç‡∏±‡∏ï‡∏§‡∏Å‡∏©‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ</label>
          <input id="holidayHave" type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 3" oninput="updateTotalLeave()" />
        </div>
      </div>
    
      <!-- ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà 2: ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏£‡∏ß‡∏° -->
      <div style="margin-top: 10px;">
        <strong>‡∏£‡∏ß‡∏°‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</strong>
        <span id="totalLeaveDays">0</span> ‡∏ß‡∏±‡∏ô
      </div>
    
      <!-- ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ -->
      <label style="margin-top: 12px;">‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ</label>
      <input id="leaveUsed" type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 2" />
    </section>

    <section>
      <h3>‚ûï ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏∞‡∏™‡∏°</h3>
    
      <label>‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏∞‡∏™‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ</label>
      <input id="accumulateHave" type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 5" oninput="calculateRemain()" />
    
      <div class="flex-pair">
        <div>
          <label>‡πÉ‡∏ä‡πâ‡πÑ‡∏õ</label>
          <input id="accumulateUsed" type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 2" oninput="calculateRemain()" />
        </div>
        <div>
          <label>‡∏™‡∏∞‡∏™‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°</label>
          <input id="accumulateAdd" type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 1" oninput="calculateRemain()" />
        </div>
      </div>
    
      <div style="margin-top: 10px;">
        <strong>‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏∞‡∏™‡∏°‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</strong>
        <span id="accumulateRemainText">-</span> ‡∏ß‡∏±‡∏ô
      </div>
    </section>

    <button onclick="sendMessage()">‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
  </main>

  <footer>
    <p>Powered by LINE LIFF | @SophitDev</p>
  </footer>

  <script>
    async function sendMessage() {
      try {
        await liff.init({ liffId: "2007788493-7JGgNED8" });
    
        if (!liff.isLoggedIn()) {
          liff.login();
          return;
        }
    
        // ‡∏£‡∏≠‡πÉ‡∏´‡πâ LIFF ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
        // if (!liff.isApiAvailable('sendMessages')) {
        //   alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏î‡πâ ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å LIFF API ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô');
        //   return;
        // }
    
        // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å input
        const name = document.getElementById('name').value;
        const workingDay = document.getElementById('workingDay').value;
        const credit = document.getElementById('credit').value;
        const qr = document.getElementById('qr').value;
        const totalSales = document.getElementById('totalSales').value;
    
        const cash = parseFloat(document.getElementById('leaveHave').value) || 0;
        const cashUsed = parseFloat(document.getElementById('leaveUsed').value) || 0;
        const holiday = parseFloat(document.getElementById('holidayHave').value) || 0;
        // const holidayUsed = parseFloat(document.getElementById('holidayUsed').value) || 0; // ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß
    
        const accumulateHave = parseFloat(document.getElementById('accumulateHave').value) || 0;
        const accumulateUsed = parseFloat(document.getElementById('accumulateUsed').value) || 0;
        const accumulateAdd = parseFloat(document.getElementById('accumulateAdd').value) || 0;
    
        const accumulateRemain = accumulateHave + accumulateAdd - accumulateUsed;
    
        const message = 
          `üïí ‡∏™‡πà‡∏á‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô: ${workingDay} ‡∏ß‡∏±‡∏ô
‡πÇ‡∏≠‡∏ó‡∏µ: ${credit} ‡∏ä‡∏°.
‡∏™‡∏≤‡∏¢: ${qr} ‡∏ô‡∏≤‡∏ó‡∏µ
(‡∏´‡∏±‡∏Å 15 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${Math.max(qr - 15, 0)} ‡∏ô‡∏≤‡∏ó‡∏µ)
üí∞ ‡∏£‡∏ß‡∏°‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢: ${totalSales} ‡∏ö‡∏≤‡∏ó
          
üìÜ ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ ${cash} ‡∏ß‡∏±‡∏ô  
‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏±‡∏Å‡∏Ç‡∏±‡∏ï‡∏§‡∏Å‡∏©‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ ${holiday} ‡∏ß‡∏±‡∏ô  
‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${cash + holiday} ‡∏ß‡∏±‡∏ô  
‡πÉ‡∏ä‡πâ‡πÑ‡∏õ ${cashUsed} ‡∏ß‡∏±‡∏ô
          
‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏∞‡∏™‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ ${accumulateHave} ‡∏ß‡∏±‡∏ô
‡πÉ‡∏ä‡πâ‡πÑ‡∏õ ${accumulateUsed} ‡∏ß‡∏±‡∏ô
‡∏™‡∏∞‡∏™‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏° ${accumulateAdd} ‡∏ß‡∏±‡∏ô
‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ${accumulateRemain} ‡∏ß‡∏±‡∏ô`;
    
        await liff.sendMessages([{
          type: "text",
          text: message
        }]);
    
        alert("‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡πâ‡∏ß");
        liff.closeWindow();
    
      } catch (error) {
        console.error(error);
        alert("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + error.message);
      }
    }
    
  function calculateRemain() {
    const have = parseFloat(document.getElementById("accumulateHave").value) || 0;
    const used = parseFloat(document.getElementById("accumulateUsed").value) || 0;
    const add = parseFloat(document.getElementById("accumulateAdd").value) || 0;
    const remain = have - used + add;
    document.getElementById("accumulateRemainText").textContent = remain.toFixed(1);
  }

  function updateTotalLeave() {
    const leave = parseFloat(document.getElementById('leaveHave').value) || 0;
    const holiday = parseFloat(document.getElementById('holidayHave').value) || 0;
    const total = leave + holiday;
    document.getElementById('totalLeaveDays').textContent = total;
  }
  </script>

</body>
</html>
